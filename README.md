# Crosshatching
A simple implementation of a NPR crosshatching shader based on the Siggraph 2017 talk by Yuxiao Du and Ergun Akleman, "Designing look-and-feel using generalized crosshatching".  The paper for the talk can be found here: http://dl.acm.org/citation.cfm?id=3085054

![Image of the crosshatching in action](https://github.com/JonGreenberg/Crosshatching/blob/master/Example.JPG)

The basic idea here is to generate a post-material that uses the world-space normal and world-space position to perform triplanar mapping of the cross-hatching pattern.  The "magic" of the technique is to map scene intensity at the pixel to more eroded/dilated versions of the crosshatch pattern to approximate artist's shading relative to intensity.  Ideally you put the various images into a texture array and map intensity to lerping between the slices.

Note these files were built with Unreal Engine 4 v4.15, which lacks texture array support (booo!), and is really the way you'd want to go about doing this (to reduce texture sampling overhead and to nicely handle the odd slice count while still allowing for mipmapping).  Instead I lazily built a custom node and just brute-force the image selection.  That said, this isn't meant to be used in a title as is, just illustrate how one might get it working.

As one might expect using images consisting of lines as textures, mipmapping makes a big difference here and largely prevents the whole thing from looking like a noisy mess.  As well, this would probably work better with a better seed hatching image - one that actually seemlessly tiles instead of having hard discontinuities.  But hey, this is the equivalent of programmer art you're seeing in the above image and it still mostly just works.

The images were generated by snipping the centre cross hatching texture example from the 3x3 grid in the paper, and then performing successive dilate passes to generate the white-side of grey and erosion to generate the dark side of grey.  This was done in GIMP V2.0, using the default erode/dilate operators, resulting in a total of seven images including the original.  It's important that the extreme of the set approximate white and black, which is the case with the most dilated and eroded images in this case, to get reasonable looking results for highlights and shadows.

Being a bit lazy, I haven't bothered hooking it into a project - you'll need to do that yourself if you want to try the files out.  I'd recommend previewing against a simple white albedo material, lit properly.  It should be as easy as binding the included post-material into the scene's default post-process volume.

Simple enough!

-Jon
